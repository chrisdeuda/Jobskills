$(document).ready(function(){
         $Form = {
        init: function(){
            $Form.processForm();
        },

        processForm: function(){

             $('#btn_new_products').click( function (event){
                event.preventDefault();
                $('#major_products_cancel').trigger('click'); //to close the modal using the cancel button


            });

             $('#new_major_products_ok').click( function (event){
                event.preventDefault();

                var url = $('#frm_new_major_products').attr('action');
                var new_product = $('#txt_new_product').val();

                postData = {
                    "new_industry_list_name": new_product,
                };

                $.post( url , postData, function(o){
                    var dom_message = "";

                     if ((o.result) == 1){
                        dom_message = '<span class="glyphicon glyphicon-ok" aria-hidden="true"></span>';
                        dom_message += '<span>' + o.message + '</span>';

                        $Form.successAlert( dom_message);

                        $('#major_product_result').val( new_product );


                        msg_timer = setInterval(function(){
                          $('#new_major_products_cancel').trigger('click'); //to close the modal using the cancel button
                          clearInterval( msg_timer );

                        }, 2000);



                     } else if ( o.result == 0 ){
                        dom_message = '<span class="glyphicon glyphicon-remove" aria-hidden="true"></span>';
                        dom_message += '<span>' + o.error + '</span>';
                        $Form.errorAlert( dom_message );

                        console.log(  o.error );

                     }
               }, 'json');


                $Form.sendCreateNewProduct();
            });

        },

         // Testing Area for Developing Function
        // =====================================================================




        // Processing Form Values
        // =====================================================================

        // @GUI Manipulation
        // =====================================================================
        errorAlert: function( msg ){
            $success_message = $('#success_message');
            $success_message.addClass('sr-only');
            $error_message = $('#error_message');
            $error_message.removeClass('sr-only');

            dom = $error_message;

            if ( typeof msg === 'undefined'){
                console.log( 'Undefine msg');
            } else {
                dom.html( msg );
            }

            dom.fadeIn();

            setTimeout(function(){
                dom.fadeOut();
            }, 5000);

            //console.log( $error_message.attr('class'));

        },

        successAlert: function( msg  ){
            $success_message = $('#success_message');
            $success_message.removeClass('sr-only');

            $error_message = $('#error_message');
            $error_message.addClass('sr-only');

            dom = $success_message;

            if ( typeof msg === 'undefined'){
                dom.html( msg );
            } else {
                dom.html(msg);
            }

            dom.fadeIn();

            setTimeout(function(){
                dom.fadeOut();

            }, 5000);


        },


        // @AJAX Request
        // =====================================================================
        sendCreateNewProduct: function ( id, new_name ) {





        },




    }


     $Form.init();









        $business_nature_search = "";   // initialize this variable

        $("#main_economic_activity").hide();    // hide the industry type generated by php

        $("#btn_business_nature").click(function(){

            $("#major_products").hide();
            $("#main_economic_activity").show();    // show the div of industry type
            $("#main_economic_activity li").hide(); // hide the list items for the mean time
            $business_nature_search = $("#business_nature").val();  // get the value of the search textfield


            if( $business_nature_search != ""){  // checks if search textfield is not empty
                for($a = 1; $a <= $("#main_economic_activity li").length; $a++){    // traverse each list items

                    $business_nature_search = $business_nature_search.toLowerCase();    // convert the search word to lower case
                    $content = $("#main_economic_activity #"+$a).html().toLowerCase();  // get the content of each list item and convert to lower case

                    if($content.search($business_nature_search) != -1){ // checks each list item content if contains the searched word

                        $("#main_economic_activity #"+$a).show();
                    }
                }
            } else {    //display all item when empty input
                for($a = 1; $a <= $("#main_economic_activity li").length; $a++){    // traverse each list items
                    $("#main_economic_activity #"+$a).show();
                }
            }
            $("#business_nature").val("");  // reset the search textfield
        });

        $selected_result = "";
        $("#main_economic_activity li").click(function(){

            $("#main_economic_activity li").css("background-color","initial");
            $(this).css("background-color","#4FC1E9");
            $selected_result = $(this).html();
            $selected_result = $selected_result.replace(/&amp;/g, "&");
        });
        $("#main_economic_activity_ok").click(function(){

            if($selected_result != ""){

                $("#business_nature_result").val($selected_result);
                $selected_result = "";
            }
            $("#main_economic_activity li").css("background-color","initial");
            $("#main_economic_activity").hide();
            // @added
            $('#main_economic_activity_cancel').trigger('click'); //to close the modal using the cancel button

            //@here
        });
        $("#main_economic_activity_cancel").click(function(){

            $("#main_economic_activity").hide();
            $selected_result = "";
        });

        $major_product_search = ""; // initialize this variable

        $("#major_products").hide();    // hide the industry type generated by php

        $("#btn_major_product").click(function(){

            if($("#major_product").val() != ""){    // checks if search textfield is not empty

                $("#main_economic_activity").hide();
                $("#major_products").show();    // show the div of industry list
                $("#major_products li").hide(); // hide the list items for the mean time
                $major_product_search = $("#major_product").val();  // get the value of the search textfield
                $("#major_product").val("");    // reset the search textfield

                for($a = 1; $a <= $("#major_products li").length; $a++){    // traverse each list items

                    $major_product_search = $major_product_search.toLowerCase();    // convert the search word to lower case
                    $content = $("#major_products #"+$a).html().toLowerCase();  // get the content of each list item and convert to lower case

                    if($content.search($major_product_search) != -1){   // checks each list item content if contains the searched word

                        $("#major_products #"+$a).show();
                    }
                }
            }
        });
        $selected_result = "";
        $("#major_products li").click(function(){

            $("#major_products li").css("background-color","initial");
            $(this).css("background-color","#4FC1E9");
            $selected_result = $(this).html();
            $selected_result = $selected_result.replace(/&amp;/g, "&");
        });
        $("#major_products_ok").click(function(){

            if($selected_result != ""){

                $("#major_product_result").val($selected_result);
                $selected_result = "";
            }
            $("#major_products li").css("background-color","initial");
            $("#major_products").hide();


            $('#major_products_cancel').trigger('click'); //to close the modal using the cancel button




        });
        $("#major_products_cancel").click(function(){

            $("#major_products").hide();
            $selected_result = "";
        });

    });